#    

****: 2026-01-07  
****: Multi-Agent System Product Manager  
** **:    
****: v1.0

---

## Executive Summary

       ,     .  20,269   5  ,         .

###  
-  **  **: 98%  , 87%   (: 70%)
-  **  **:  chunk_type    (judgment: 592 )
- ℹ ** **: 26%    ( 93.2)
-  ** **:   0% (   )

---

## 1.  

### 1.1  
- ****: PostgreSQL 16 + pgvector
- **  **: 20,269 ( )
- ** **: 11,976
- ** **: 2026-01-07

### 1.2  

|  |  |   |  |
|--------|------|-----------|------|
|    | chunk_type   |   ±30% |    |
|    |     | 70%  |   (87-98%) |
|   |     |   | ℹ 26%  |
|   | /  |   |   0% |
| /  |     | < 1% |   (0.02%) |

---

## 2.   

### 2.1    

####  

| Chunk Type | Doc Type | Count | Avg Length | Q1-Median-Q3 | Min-Max |  |
|------------|----------|-------|------------|--------------|---------|------|
| **qa_combined** | counsel_case | 13,524 | **450** | 352-450-554 | 83-949 |  |
| **resolution_row** | criteria_resolution | 139 | **251** | 148-198-310 | 38-775 |  |
| **article** | law | 667 | **134** | 68-97-166 | 24-648 |  |
| **paragraph** | law | 392 | **183** | 98-142-228 | 72-661 |  |
| **decision** | mediation_case | 816 | **317** | 126-218-544 | 10-1071 |  |
| **judgment** | mediation_case | 3,203 | **592** | 514-624-709 | 2-1608 |  |
| **law** | mediation_case | 109 | **385** | 205-418-570 | 5-929 |  |
| **parties_claim** | mediation_case | 1,419 | **556** | 470-578-688 | 98-1143 |  |

####    

[`data_transform_pipeline.py`](../../backend/scripts/data_processing/data_transform_pipeline.py)    :

| Chunk Type |   |   |   |  |
|------------|-----------|-----------|-----------|------|
| decision | 500 | 600 | 317 |    () |
| reasoning | 700 | 800 | N/A | - ( ) |
| judgment | 700 | 800 | **592** |      |
| parties_claim | 650 | 750 | **556** |    |
| law | 400 | 500 | 385 (mediation), 134/183 (law ) |   |
| qa_combined | 600 | 700 | 450 |    |

####  

1. **judgment   **:  2 ~  1,608
   - :      
   - :        
   - : 700    

2. **decision   **:  500  317
   - :    ()
   - :    (  )

3. **qa_combined **:  450, Q1-Q3  352-554
   -     

---

### 2.2    

####  

** **: 100  ( )

|  |  |  |  |
|------|------|------|------|
|   | **98/100 (98.0%)** | 70%  |   |
|   | **87/100 (87.0%)** | 70%  |   |

####  

** **:
-   , , ,  `[` 
- : " 750", "[]", "1. "

** **:
-    : `.`, `.`, `.`, `?`, `?`, `?`, `?`, `!`, `?`

####  

1. **   (98%)**:
   -        
   -    `[]`, `[]`    

2. **   (87%)**:
   - 13%    
   - :   ,   
   - :        

---

### 2.3   

####  

** **: 50 (  )

|  |  |
|------|------|
|   | **13/50  (26.0%)** |
|    | **93.2** |

#### 

1. **  26%**:
   -      
   - :     (decision, parties_claim )
   - :    

2. **    93**:
   -    (2-3 )
   - judgment, parties_claim     

#### 

- **  **:
  - judgment, parties_claim: 100-150   (  )
  - decision, law:   ( )
  -  `data_transform_pipeline.py` `overlap_size`  

---

### 2.4   

####  

** **: 20  (  )

|   |   |  |
|-----------------|-----------|------|
| **keywords** | **0/20 (0.0%)** |   |
| decision_date | 9/20 (45.0%) |   (  ) |
| case_no | 9/20 (45.0%) |   (  ) |

####  

1. **  0%**:
   -  ** **:     
   -  :
     - `metadata_enricher.py`   
     - DB   keywords   
     - documents.metadata JSONB keywords  

2. **decision_date, case_no **:
   -   (9 )
   -  11 counsel_case () →    ()

#### 

**  **:
1. documents  keywords    
2. `metadata_enricher.py`  
3.    

---

### 2.5 /  

####  

** **: 20,269

|  |  |  |  |
|----------|------|------|------|
|    (< 10, drop=FALSE) | **4** | **0.02%** |   |
|   (< 50, drop=FALSE) | 119 | 0.59% |   |
| Drop  TRUE | **0** | **0.00%** | ℹ  |

#### 

1. **     (0.02%)**:
   -        
   - 4      

2. **Drop   (0)**:
   - `drop`   
   - :       drop=TRUE 

---

## 3.  

### 3.1 

|  |   |
|------|-----------|
|  **   ** | 98%  , 87%   |
|  **  ** |     (±30%) |
|  **   ** | 0.02% (  ) |
|  **chunk_type ** |       |

### 3.2     

|  |  |  |   |
|------|--------|----------|-----------|
|  **  0%** |  |   | metadata_enricher  |
|  **judgment   ** |  |   | 700    |
|  **   (26%)** |  |   |    |
| ℹ **Drop  ** |  |   |    drop  |

---

## 4.  

### 4.1   ( )

#### 1.    

** **:
- documents.metadata keywords   (0%)
- Hybrid Search   

** **:
```bash
cd /home/maroco/ddoksori_demo/backend/scripts/metadata_extraction
conda run -n ddoksori python run_all_extractions.py
```

****:
```sql
SELECT 
    d.doc_id, 
    d.doc_type,
    d.metadata->>'keywords' AS keywords
FROM documents d
LIMIT 10;
```

---

### 4.2   ( )

#### 2. judgment  

****: 700      

****:
```python
# data_transform_pipeline.py 
CHUNK_PROCESSING_RULES['judgment']['max_length'] = 700  #  800 → 700
CHUNK_PROCESSING_RULES['judgment']['split_allowed'] = True
```

#### 3.    

****: 87% → 95%  

****:
```python
def is_sentence_end(text: str) -> bool:
    """   """
    endings = ['.', '.', '.', '?', '?', '?', '?', '!', '?', ')', ')']
    return any(text.strip().endswith(end) for end in endings)

#    
if not is_sentence_end(chunk_text):
    #    
    ...
```

---

### 4.3   ( )

#### 4. Semantic Chunking 

** **:    (character count)

** **:    (semantic similarity)

** **:
- LangChain `SemanticChunker`
- LlamaIndex `SentenceSplitter`

****:
```python
from langchain.text_splitter import SemanticChunker
from sentence_transformers import SentenceTransformer

model = SentenceTransformer('nlpai-lab/KURE-v1')
splitter = SemanticChunker(
    embeddings=model,
    breakpoint_threshold_type="percentile",
    breakpoint_threshold_amount=95
)

chunks = splitter.split_text(document_text)
```

#### 5. Hierarchical Chunking

****:   

****:
- Parent Chunk ( ):   (500-1000)
- Child Chunk ( ): / (100-300)
-  : Child Chunk  → Parent Chunk  

#### 6. Dynamic Overlap

****:    (100-150)

****:     
-   (decision, judgment):  150
-   (parties_claim):  100
-   (law, article):  0

---

## 5.    

|  |   |   |  |
|------|----------------|-----------|------|
|    | 443 | 300-500 |   |
|    | 87-98% | 70-90% |   |
|    | 0.02% | < 1% |   |
|   | 0% (keywords) | 50-80% |    |

---

## 6. 

    **  ** ,         . 

###   
-  **   ** (  )

###   
-  judgment  
-     

###   
-  Semantic Chunking 
-  Hierarchical Chunking
-  Dynamic Overlap

    **RAG   15-20% **    .

---

****: Multi-Agent System Product Manager  
** **: 2026-01-07  
** **:
- [`data_transform_pipeline.py`](../../backend/scripts/data_processing/data_transform_pipeline.py)
- [`metadata_enricher.py`](../../backend/scripts/data_processing/metadata_enricher.py)
-  : `/tmp/chunking_quality_test_results.json`
