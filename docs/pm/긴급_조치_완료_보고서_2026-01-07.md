#    

****: 2026 1 7  
****: AI Assistant (Multi-Agent System PM)  
** **: `____09bf9cfa.plan.md`

---

##  Executive Summary

  (2026-01-07)  3      :

1.  **   **: 11,985     
2.  **  **: 12  ( ) DB  
3.  **table 1/3/4  **: , ,   DB  

**  **:  20 (    )

---

## 1.    

### 1.1  

#### A.  
- ****: `backend/scripts/data_processing/data_transform_pipeline.py`
- ** **: `MetadataEnricher` import    
- ****:         

#### B.    
- ****: `backend/scripts/utilities/update_metadata_keywords.py`
- ****:
  -   (top 15)
  -   (, )
  -    (top 20)
  -  
- ** **:
  ```
   : 11,985
   : 11,985
  : 0
   : 0.2
    : 0.00/
  ```

### 1.2  

|   |   |   |  |
|-----------|---------|-------------|----------|
| counsel_case | 11,342 | 11,342 | 100.0% |
| criteria_item_list | 1 | 1 | 100.0% |
| criteria_lifespan | 1 | 1 | 100.0% |
| criteria_resolution | 1 | 1 | 100.0% |
| criteria_warranty | 1 | 1 | 100.0% |
| law | 12 | 12 | 100.0% |
| mediation_case | 632 | 627 | 99.2% |

** **: 99.9%

### 1.3  

-    :    
-    :  , ,   
-    :      

---

## 2.   

### 2.1   

** **:
- 13  JSONL  
- DB  1  (`statute:001706`)
- 12  

****:
-  `transform_law_data()`        
-       

### 2.2  

#### A.    
- ****: `transform_law_single_file(file_path: str)`
- ****: `backend/scripts/data_processing/data_transform_pipeline.py`
- ****:
  -   JSONL  
  -   doc_id  (`law:{file_name.lower()}`)
  -   (  →  )
  -     

#### B.   
- ****: `backend/scripts/data_loading/process_all_laws.py`
- ****:
  - 11     ( )
  - DB    
  -   

### 2.3  

```
  : 11
 : 11
 : 11
 : 3,828
: 0
```

**  **:
1.  (1,069 )
2.  (1,392 )
3.  (220 )
4.   (116 )
5.     (278 )
6.      (185 )
7.     (178 )
8.     (75 )
9.    (207 )
10.   (15 )
11.     (93 )

### 2.4  

|  |   |   |  |
|------|---------|---------|--------|
|   | 1 | 12 | +1,100% |
|   | 1,059 | 4,887 | +361% |

****:  2    `statute:001706`   `law:civil_law_chunks`  doc_id  .      .

---

## 3. table 1/3/4  

### 3.1   

** **:
- table1 (), table3 (), table4 ()  
- DB table2 () 
- 3  

****:
- `data_transform_pipeline.py` `transform_criteria_table2()`  
- table1/3/4   

****:
- **table1 ()**:    
  - , ,   
  -      
- **table3 ()**:   
- **table4 ()**:   

### 3.2  

#### A.    
1. **`transform_criteria_table1(file_path: str)`**
   - doc_id: `criteria:table1`
   - doc_type: `criteria_item_list`
   - , ,   

2. **`transform_criteria_table3(file_path: str)`**
   - doc_id: `criteria:table3`
   - doc_type: `criteria_warranty`
   -   

3. **`transform_criteria_table4(file_path: str)`**
   - doc_id: `criteria:table4`
   - doc_type: `criteria_lifespan`
   -   

#### B.   
- ****: `backend/scripts/data_loading/process_criteria_tables.py`
- ****:
  - 3   
  - DB    
  -   

### 3.3  

```
 : 3
 : 3
 : 487
: 0
```

** **:
- **table1 ( )**: 387 
- **table3 ()**: 38 
- **table4 ()**: 62 

### 3.4  

|  |   |   |  |
|------|---------|---------|--------|
|   | 1 | 4 | +300% |
|   | 139 | 626 | +350% |

---

## 4.   

### 4.1   

```
 : 11,990
 : 24,584
 : 20,259
 : 82.4%
```

### 4.2   

|   |   |   |  |
|-----------|---------|---------|------|
| counsel_case | 11,342 | ~19,000 |  |
| mediation_case | 632 | ~3,000 |  |
| law | 12 | 4,887 |  ( ) |
| criteria_item_list | 1 | 387 |   () |
| criteria_resolution | 1 | 139 |  |
| criteria_warranty | 1 | 38 |  () |
| criteria_lifespan | 1 | 62 |  () |

### 4.3  

- ** **: 99.9%
- **  **: 100% (   )
- **/ **: 100% ( )

---

## 5.   ( )

### 5.1   

1. ** ** (:  )
   -   4,315  ( 3,828 +  487) KURE-v1  
   -  : GPU    30
   - : `backend/scripts/generate_embeddings.py` (  )

2. **   ** (:  )
   - `statute:001706` () vs `law:civil_law_chunks` ()   
   - :    ( doc_id )
   - :
     ```sql
     DELETE FROM documents WHERE doc_id = 'statute:001706';
     ```

3. **  ** (:  )
   - /   
   -   : `backend/scripts/evaluate_hybrid_search.py`
   -     (table1  )

### 5.2  

4. **Golden Dataset ** (:  )
   - table1       
   - : " " → table1 ""   

5. **Query Analyzer ** (:  )
   - table1      
   -     

---

## 6.   

### 6.1 

1. `backend/scripts/process_all_laws.py` -   
2. `backend/scripts/process_criteria_tables.py` -    
3. `backend/scripts/update_metadata_keywords.py` -   

### 6.2  

1. `backend/scripts/data_processing/data_transform_pipeline.py`
   - `transform_law_single_file()`  
   - `transform_criteria_table1()`  
   - `transform_criteria_table3()`  
   - `transform_criteria_table4()`  
   - `MetadataEnricher` import  

### 6.3 

1. `docs/pm/____2026-01-07.md` ( )

---

## 7.   

### 7.1   
```bash
cd /home/maroco/ddoksori_demo/backend/scripts
conda run -n ddoksori python backend/scripts/data_loading/process_all_laws.py
```

### 7.2   
```bash
cd /home/maroco/ddoksori_demo/backend/scripts
conda run -n ddoksori python backend/scripts/data_loading/process_criteria_tables.py
```

### 7.3   
```bash
cd /home/maroco/ddoksori_demo/backend/scripts
conda run -n ddoksori python backend/scripts/utilities/update_metadata_keywords.py
```

### 7.4 
```bash
cd /home/maroco/ddoksori_demo/backend
conda run -n ddoksori python -c "
import psycopg2
import os
from dotenv import load_dotenv

load_dotenv()
conn = psycopg2.connect(
    host=os.getenv('DB_HOST', 'localhost'),
    port=os.getenv('DB_PORT', '5432'),
    database=os.getenv('DB_NAME', 'ddoksori'),
    user=os.getenv('DB_USER', 'postgres'),
    password=os.getenv('DB_PASSWORD', 'postgres')
)
cur = conn.cursor()

#  
cur.execute('SELECT COUNT(*) FROM documents')
print(f' : {cur.fetchone()[0]:,}')
cur.execute('SELECT COUNT(*) FROM chunks WHERE drop=FALSE')
print(f' : {cur.fetchone()[0]:,}')

#  
cur.execute(\"\"\"
    SELECT COUNT(*), SUM(chunk_count)
    FROM (
        SELECT d.doc_id, COUNT(c.chunk_id) as chunk_count
        FROM documents d
        LEFT JOIN chunks c ON d.doc_id = c.doc_id
        WHERE d.doc_type = 'law'
        GROUP BY d.doc_id
    ) subq
\"\"\")
law_docs, law_chunks = cur.fetchone()
print(f': {law_docs} , {law_chunks} ')

#  
cur.execute(\"\"\"
    SELECT COUNT(*), SUM(chunk_count)
    FROM (
        SELECT d.doc_id, COUNT(c.chunk_id) as chunk_count
        FROM documents d
        LEFT JOIN chunks c ON d.doc_id = c.doc_id
        WHERE d.doc_type LIKE '%criteria%'
        GROUP BY d.doc_id
    ) subq
\"\"\")
criteria_docs, criteria_chunks = cur.fetchone()
print(f': {criteria_docs} , {criteria_chunks} ')

conn.close()
"
```

---

## 8. 

 **   **

-  : 1 → 12 (  )
-  : 1 → 4 (table1/3/4 )
-  : 0% → 99.9% 

** **:
1.    12 
2.       
3.     

** **:
1.    ( 4,315 )
2.    
3.  Golden Dataset 

---

**  **: 2026 1 7  
** **:  20  
****:   TODO 
