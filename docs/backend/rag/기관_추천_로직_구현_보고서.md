#      

##   

      (KCA, ECMC, KCDRC)     .

---

##    

### 1.  

#### `agency_recommender.py`
- ****: `backend/app/rag/agency_recommender.py`
- ****: ~400
- ** **:
  -     ( )
  -     (  )
  -   ( 70% +  30%)
  -   
  -    

####  

```python
class AgencyRecommender:
    - calculate_rule_scores(query)        #  
    - calculate_stat_scores(results)      #   
    - recommend(query, results, top_n)    #  
    - explain_recommendation(...)         #  
    - format_recommendation_text(...)     #  
```

### 2.  

####  : `test_agency_recommender.py`
- ****: `backend/scripts/test_agency_recommender.py`
- ** **:
  1.     (4 , 100% )
  2.     (1 , )
  3.   (1 , )
  4.   (1 , )
  5.   (1 , )
  6.   (3 , 100% )
  7.   (5 , 100% )

**  **:    

####  : `test_agency_with_real_data.py`
- ****: `backend/scripts/test_agency_with_real_data.py`
- ****:  DB   +   
- ****: DB         

### 3.  

#### `agency_recommendation_example.py`
- ****: `backend/examples/agency_recommendation_example.py`
- ** **:
  1.   ( )
  2.    
  3.   
  4.    
  5.  

** **:     

### 4. 

#### `README_agency_recommender.md`
- ****: `backend/app/rag/README_agency_recommender.md`
- ****:
  -    
  -    
  -    
  - API  
  -  
  -    
  -   
  -   

---

##   

###  

```
 = ( × 0.7) + ( × 0.3)
```

####   (70%)
- 80   
-     
-    KCA  

####   (30%)
-     
-   (  )
-   

---

##   

###   : 100%

|   |   |  |  |
|----------------|----------|------|------|
|    | 4 | 4 | 0 |
|    | 1 | 1 | 0 |
|   | 1 | 1 | 0 |
|   | 1 | 1 | 0 |
|   | 1 | 1 | 0 |
|   | 3 | 3 | 0 |
|   | 5 | 5 | 0 |
| **** | **16** | **16** | **0** |

###   

|  |  | 1  |  |
|---------|-----|----------|------|
|    |    ... | ECMC |  |
|    |    ... | KCDRC |  |
|    |    ... | ECMC |  |
|    | 11    ... | ECMC |  |
|   |    ... | KCDRC |  |

---

##   

### `__init__.py` 

```python
from .agency_recommender import (
    AgencyRecommender,
    recommend_agency,
    explain_agency_recommendation
)

__all__ = [
    'VectorRetriever',
    'RAGGenerator',
    'MultiStageRetriever',
    'AgencyRecommender',
    'recommend_agency',
    'explain_agency_recommendation',
]
```

###   API

```python
# 1.   
from app.rag.agency_recommender import AgencyRecommender
recommender = AgencyRecommender()
recommendations = recommender.recommend(query, results)

# 2.   
from app.rag import recommend_agency
recommendations = recommend_agency(query, results)

# 3.  
from app.rag import explain_agency_recommendation
explanation = explain_agency_recommendation(query, results)
```

---

##   

###  
-   : O(n) - n  
-   : O(k) - k   
- : O(n + k) ≈ ** **

###  
-  : ~10KB
-   : ~1MB 

### 
-     
-      
-    

---

##   

### 1.    

```
  : 
        
   ( : 0.96)

  : 
       (, , ,  )
   ( : 0.48)

   :
   - : 3
   - : 1
```

### 2.   

-    (, , )
-   
-   
-  

### 3.  

```python
#   (90:10)
recommender = AgencyRecommender(rule_weight=0.9, stat_weight=0.1)

#  (50:50)
recommender = AgencyRecommender(rule_weight=0.5, stat_weight=0.5)

#   (30:70)
recommender = AgencyRecommender(rule_weight=0.3, stat_weight=0.7)
```

---

##    

###  (1-2)
- [ ]    
- [ ] A/B  

###  (1-2)
- [ ]    
- [ ]   

###  (3+)
- [ ]   
- [ ]  

---

##   

```
backend/
 app/
    rag/
        __init__.py                           ()
        agency_recommender.py                 (, 400)
        README_agency_recommender.md          (, )
        IMPLEMENTATION_SUMMARY.md             (, )
 scripts/
    test_agency_recommender.py                (,  )
    test_agency_with_real_data.py             (,  )
 examples/
     agency_recommendation_example.py          (,  )
```

**    **: ~1,200 ( )

---

##  

    ,    :

1.  ****: 16   100% 
2.  ****:    
3.  ****:  /  
4.  ** **:    
5.  ****:  API,  
6.  ****:     API 

**  **: 2026 1 6
****:    
